--setup
--start-query-logging

CREATE IMMUTABLE ARRAY ABRLOAD <a:double compression 'dictionary'> [x=0:2999,100,0, y=0:2999,100,0]
CREATE EMPTY ARRAY ABRREDIM <x:int64>[a=0:2999,20,0]

load(ABRLOAD,'../tests/harness/testcases/data/xyz_small.txt')

--test 

scan(ABRLOAD)
scan(ABRREDIM)

--shell --command "../utils/killquery.sh -afl 15 2 'redimension_store (ABRLOAD, ABRREDIM)'"

--sleep 12
scan(ABRLOAD)
--echo "should be empty..."
scan(ABRREDIM)

--echo "should be no mapping arrays..."
list('arrays')

--cleanup
--stop-query-logging
remove(ABRLOAD)
remove(ABRREDIM)
