--setup
CREATE IMMUTABLE ARRAY M4x4 <a:int32, b:int32> [x=0:3,3,0, y=0:3,3,0]
load(M4x4,'../tests/harness/testcases/data/M4x4.txt')

--test
--aql select sum(a) from M4x4 regrid 3,3 as R
--aql select sum(b) from M4x4 regrid 3,3 as R
--aql select count(*) from M4x4 regrid 3,3 as R
--aql select count(select * from R) from M4x4 regrid 3,3 as R
--aql select count(select * from R) from M4x4 regrid 3,3 as R
--aql select sum(select a from R) from M4x4 regrid 3,3 as R
--aql select sum(select a from R) from project(M4x4, a) regrid 3,3 as R
--aql select sum(R) from project(M4x4, a) regrid 3,3 as R

--cleanup
remove(M4x4)
