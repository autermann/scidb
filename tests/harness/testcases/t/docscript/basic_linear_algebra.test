
--test
--start-query-logging

--set-format dcsv
--start-igdata
--aql CREATE ARRAY A <attribute:double> [x=1:3,3,0,y=1:5,5,0]  
create array m2x3 <val:double> [i=0:1,2,0,j=0:2,3,0]  
store(build(m2x3,'[[.5,1.5,2.5],[1,2,3]]',true),m2x3)  
create array m3x2 <val:double> [i=0:2,3,0,j=0:1,2,0]  
store(build(m3x2,'[[0,2],[1,3],[2,4]]',true),m3x2)  
--stop-igdata
show(m2x3)
--set-format dense
scan(m2x3)  
--set-format dcsv
show(m3x2)
--set-format dense
scan(m3x2)  
--set-format dcsv
--start-igdata
create array m3x3<val:double> [x=0:2,3,0,y=0:2,3,0]  
store(build(m3x3,x*3+y),m3x3)  
--stop-igdata
show(m3x3)
--set-format dense
scan(m3x3)  
--aql SELECT * INTO m2x2 FROM multiply(m2x3,m3x2)  
scan(m3x3)  
transpose(m3x3)  
--set-format dcsv
--start-igdata
store(repart(m3x2,<val:double> [i=0:2,32,0, j=0:3,32,0]),new_m3x2)  
remove(m3x2)  
rename(new_m3x2,m3x2)  
--stop-igdata
show(m3x2)
--set-format dense
scan(m3x2)  
--set-format dcsv
--start-igdata
load_library('dense_linear_algebra')  
--set-format dense
--stop-igdata
--aql SELECT * FROM gesvd(m3x2, 'right')  
--aql SELECT * FROM gesvd(m3x2, 'left')  
--aql SELECT * FROM gesvd(m3x2, 'values')  

--stop-query-logging


--cleanup

remove(A)
remove(m2x3)
remove(m3x3)
remove(m2x2)
remove(m3x2)
