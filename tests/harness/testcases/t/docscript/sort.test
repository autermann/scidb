
--test
--start-query-logging

--set-format dcsv
--start-igdata
create array winnersFlat <event:string,year:int64,person:string,country:string,time:double>[i=0:*,12,0] 
--shell  --command="csv2scidb -s 1 -p SNSSN < $DOC_DATA/winners2.csv > $DOC_DATA/winners2.scidb "
--aql load winnersFlat from '../tests/harness/testcases/data/doc/winners2.scidb'  
CREATE ARRAY champions<person:string,country:string,time:double> [year=1996:2008,13,0,event(string)=3,3,0]  
redimension_store(winnersFlat,champions)  
--stop-igdata
scan(champions)  
sort(champions,country)  
--start-igdata
store(project(winnersFlat,country, year, event),winnersAbridged)  
--stop-igdata
sort(winnersAbridged,country, year desc, 100) 
--start-igdata
create array numbers <number:int64 null>[i=0:4,5,0] 
--shell  --command="csv2scidb -s 1 -p N < $DOC_DATA/mostNumbers.csv > $DOC_DATA/mostNumbers.scidb "
--aql load numbers from '../tests/harness/testcases/data/doc/mostNumbers.scidb'  
--stop-igdata
scan(numbers) 
sort(numbers, number asc) 
sort(numbers, number desc) 

--stop-query-logging


--cleanup

remove(winnersFlat)
remove(champions)
remove(winnersAbridged)
remove(numbers)
