
--test
--start-query-logging

--set-format dcsv
--start-igdata
--aql CREATE ARRAY A <x: double, err: double> [i=0:99,10,0, j=0:99,10,0]  
--aql CREATE ARRAY B <val:double>[sample (string)=6,6,0]  
--aql CREATE ARRAY default_1 <val:double>[i]  
--stop-igdata
show(default_1)
--start-igdata
--aql CREATE ARRAY default_2 <val:double>[i=1:1000,100,0, j,k]  
--stop-igdata
show(default_2)
--start-igdata
--aql DROP ARRAY A  
remove(default_1) 
--aql CREATE ARRAY products <name:string,price:float default float(100.0),sold:datetime> [i=0:*,10,0]  
--aql CREATE ARRAY product_null <name:string NULL,price:float NULL,sold:datetime NULL> [i=0:*,10,0]  
--aql CREATE ARRAY product_dflt <name:string, price:float default float(100.0), sold:datetime> [i=0:*,10,0]  
--shell  --command="cat $DOC_DATA/m4x4_missing.txt  " --store
CREATE ARRAY m4x4_missing <val1:double,val2:int32>[x=0:3,4,0,y=0:3,4,0]  
--set-format auto
--stop-igdata
load(m4x4_missing, '../tests/harness/testcases/data/doc/m4x4_missing.txt')  
--set-format dcsv
--start-igdata
remove(m4x4_missing)  
CREATE ARRAY m4x4_missing <val1:double,val2:int32 default 5468>[x=0:3,4,0,y=0:3,4,0]  
--set-format auto
--stop-igdata
load(m4x4_missing, '../tests/harness/testcases/data/doc/m4x4_missing.txt')  
--set-format dcsv
--start-igdata
create array D<val1:char default 'a', val2:int32 default 1, val3:int64 null default missing(30)> [i=0:9,10,0]  
--set-format dense
--stop-igdata
show(D) 
--set-format dcsv
--start-igdata
store(build(<val:double null> [i=0:4,5,0], '[47.0, ?, -21.1, ?100, ?50]',true), A)  
--set-format dense
--stop-igdata
scan(A) 
--set-format dcsv
apply(A,MRcode, missing_reason(val))  
--start-igdata
store(build(<val:int32 null default null> [i=0:5,6,0], '[-1,47,23,0,127,-1]',true), arrayB)  
--set-format dense
--stop-igdata
scan(arrayB) 
--set-format dcsv
apply(arrayB,MRcode, missing(val))  
--start-igdata
--aql CREATE ARRAY open <val:double>[I=0:9,10,0,J=0:*,10,0]  
--aql CREATE ARRAY winnersFlat < event:string, year:int64, person:string, time:double > [i=0:*,1000000,0]  
--aql CREATE ARRAY winners <person:string, time:double> [year=1996:2008,1000,0, event(string)=3,1000,0]  
--aql LOAD winnersFlat FROM '../tests/harness/testcases/data/doc/olympic_data.scidb'  
redimension_store(winnersFlat,winners)  
--stop-igdata
show(winners)
--aql SELECT * FROM winners:event  
--aql SELECT * FROM winners  
--start-igdata
rename(winners, OlympicWinners)  
--stop-igdata
show(OlympicWinners)
--aql SELECT * INTO winnerGrid FROM cast(OlympicWinners, < LastName: string, elapsedTime: double> [x=1996:2008,1000,0,y=0:*,1000,0] )  
show(winnerGrid)

--stop-query-logging


--cleanup

remove(B)
remove(default_2)
remove(products)
remove(product_null)
remove(product_dflt)
remove(m4x4_missing)
remove(D)
remove(A)
remove(arrayB)
remove(open)
remove(winnersFlat)
remove(OlympicWinners)
remove(winnerGrid)
