<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookV4.5/docbookx.dtd" []>
<refentry>
  <refnamediv>
    <refname>build_sparse</refname>
    <refpurpose>Assign values to attributes of a sparse array</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <synopsis><command>SELECT</command> * <command>INTO</command> target_array
<command>FROM</command> build_sparse(<replaceable>named_array</replaceable>|<replaceable>anonymous_schema</replaceable>,
<replaceable>expression</replaceable>,<replaceable>boolean_expression</replaceable>);

store(build_sparse(<replaceable>named_array</replaceable>|<replaceable>anonymous_schema</replaceable>,
<replaceable>expression</replaceable>,<replaceable>boolean_expression</replaceable>));</synopsis>
  </refsynopsisdiv>
  <refsect1>
    <title>Summary</title>
    <para>The build_sparse operator takes as input an array or anonymous  schema, an expression that defines a scalar value, and an expression that defines a Boolean value. The argument <replaceable>named_array</replaceable> must be an array that was previously created and stored in the SciDB namespace. The output of build_sparse contains an array with the same schema as the input array or anonymous schema, the value specified by <replaceable>expression</replaceable> wherever <replaceable>boolean_expression</replaceable> evaluates to  true, and empty cells wherever <replaceable>boolean_expression</replaceable> evaluates to false.</para>
  </refsect1>
  <refsect1>
    <title>Example</title>
    <informalexample>
      <para>Build a sparse-formatted identity matrix where the cells that would be occupied by 0 are empty:<programlisting>build_sparse(&lt;val:double&gt;[i=0:3,4,0,j=0:3,4,0],1,i=j);</programlisting>This query outputs:<screen>[[{0,0}(1),{1,1}(1),{2,2}(1),{3,3}(1)]]</screen></para>
    </informalexample>
  </refsect1>  
  <refsect1>
    <title>Limitations</title>
    <itemizedlist>
      <listitem>
        <para>The build operator can only take arrays with one attribute.</para>
      </listitem>
      <listitem>
        <para>The build operator can only take arrays with bounded dimensions.</para>
      </listitem>
    </itemizedlist>
  </refsect1>

</refentry>
