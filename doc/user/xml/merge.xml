<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookV4.5/docbookx.dtd" []>
<refentry>
  <refnamediv>
    <refname>merge</refname>
    <refpurpose>Merge two arrays</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <synopsis><command>SELECT</command> * <command>INTO</command> <replaceable>target_array</replaceable> 
     <command>FROM</command> merge(<replaceable>left_array</replaceable>,<replaceable>right_array</replaceable>);</synopsis>
    <synopsis>store(merge(<replaceable>left_array</replaceable>,<replaceable>right_array</replaceable>),<replaceable>target_array</replaceable>);</synopsis>
  </refsynopsisdiv>
  <refsect1>
    <title>Summary</title>
    <para>Merge combines elements from the input array the following way: for each cell in the two inputs, if the cell of
first (left) array is not empty, then the attributes from that cell are selected and placed in the output. If the cell
in the first array is marked as empty, then the attributes of the corresponding cell in the second array are taken.
If the cell is empty in both input arrays, the output&apos;s cell is set to empty.
</para>
    <para>The two input arrays should have the same attribute list, number of 
dimensions, and dimension start index. If the dimensions are not the same size, merge will return an output array the same size as the larger input array.
</para>
  </refsect1>
  <refsect1>
    <title>Example</title>
    <informalexample>
      <para>This example merges two sparse arrays.</para>
      <procedure>
        <step>
	  <para>Create a sparse array left_array and store value 1 in the first row:<programlisting>CREATE ARRAY left_array &lt;val:double&gt;[i=0:2,3,0,j=0:5,3,0];
store(build_sparse(left_array,1,i=0),left_array);</programlisting>This query outputs:<programlisting>[[{0,0}(1),{0,1}(1),{0,2}(1)]];
[[{0,3}(1),{0,4}(1),{0,5}(1)]]</programlisting></para>
        </step>
        <step>
          <para>Create a sparse identity matrix called right_array<programlisting>CREATE ARRAY right_array &lt;val:double&gt;[i=0:2,3,0,j=0:2,3,0];
store(build_sparse(right_array,1,i=j),right_array);</programlisting>This query outputs:<screen>[[{0,0}(1),{1,1}(1),{2,2}(1)]]</screen></para>
        </step>
        <step>
          <para>Merge left_array and right_array:<programlisting>merge(left_array,right_array);</programlisting>This query outputs:<screen>[[{0,0}(1),{0,1}(1),{0,2}(1),{1,1}(1),{2,2}(1)]];
[[{0,3}(1),{0,4}(1),{0,5}(1)]]</screen></para>
        </step>
      </procedure>
    </informalexample>
  </refsect1>
</refentry>
